/************************************************************************
 *   IRC - Internet Relay Chat, src/ircd.c
 *   Copyright (C) 1990 Jarkko Oikarinen and
 *                      University of Oulu, Computing Center
 *
 *   This program is free software; you can redistribute it and/or modify
 *   it under the terms of the GNU General Public License as published by
 *   the Free Software Foundation; either version 1, or (at your option)
 *   any later version.
 *
 *   This program is distributed in the hope that it will be useful,
 *   but WITHOUT ANY WARRANTY; without even the implied warranty of
 *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *   GNU General Public License for more details.
 *
 *   You should have received a copy of the GNU General Public License
 *   along with this program; if not, write to the Free Software
 *   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */

I started this file to keep track of changes made in hybrid-6,
beginning with b37.  We are in VERY HIGH SPEED development mode,
so it's important to keep track of this. =)
	
version hybrid-6-b44    30-Jan-1999
* (s_bsd.c) fixed a botch with rr = 0 causing bizarre behaviour under solaris
  (ping time outs etc.) due to a mis-cut and paste from the select code
* (s_bsd.c) redid read_packet() to use msg_ready again
* (s_bsd.c) removed unnecessary default_read_set default_write_set, that was a
  remnant from a failed experiment with pre-set up fd set's, it was
  just slowing down the code for no reason.
* (s_misc.c) redid get_client_name() slightly to be consistent,
  idented names should not have ~ non-idented names should have ~
  lets not be inconsitent with (+) prefixes for idented names
-Dianora
	
version hybrid-6-b43    24-Jan-1999
* reworked io_loop dropping CPU load significantly, this is still something 
  that needs to be looked at.
* allow stats p even if LTRACE is defined, its habit for users even if
  it is redundant.
* I liked WINTRHAWK RPL_TRACESERVER report, so thats now the default.
* Added a test in DEBUGMODE to ensure fd == 2 was never read. This
  won't happen with select() read, but can if read_messages is
  called directly. Might as well be paranoid about it now. This one
  caused ircd to abort when compiled with DEBUGMODE in b42
-Dianora
	
version hybrid-6-b42    24-Jan-1999
* removed [IP] being sent in CONNECT in connect burst
* removed [IP] if seen in m_links from prying eyes of users
-Dianora
	
version hybrid-6-b41    23-Jan-1999
* removed USERNAMES_IN_TRACE default is always on now
* get_client_name() will default to sptr->username if sptr->user->username
  is null
* made config.h/config.h.dist consistent again, went back to stock defaults
-Dianora
	
version hybrid-6-b40    21-Jan-1999
* redid m_invite for better sanity testing, you can no longer
  invite users to a non-existent channel for example.
* Don't send SJOIN's for zero length MODE_SPLIT channels (Mortiis)
* redid m_sjoin for MODE_SPLIT channels treat it as a brand new channel
* fixed broken NO_JOIN_ON_SPLIT to only care about channels that had
  existed before a split

-Dianora

version hybrid-6-b39	20-Jan-1999
* sanity test m_gline parc argument count, older hybrid-5 servers
  with buggy GLINE can core new hybrid-6 correct GLINE code 
* Forward the GLINE even if GLINE is not defined on this server.
  No point having GLINE for opers on a HUB for example, and servers
  that wish to opt out of others placing GLINE's can still relay it.
* keep a link list of 0 member channels created on a split
  if PRESERVE_CHANNEL_ON_SPLIT or NO_JOIN_ON_SPLIT is defined
  remove all 0 member channels when split heals
  redid NO_JOIN_ON_SPLIT to only care about channels that once existed.

-Dianora
	
version hybrid-6-b38	20-Jan-1999

* bumped version up to b38
* fixed bugs with "reason" code in ircd.c
* duplicated config.h to config.h.dist	
* fixed bug in ircd.c with SEND_FAKE_KILL_TO_CLIENT
  if IDLE_CHECK not defined
* Added new defines to m_info() in s_serv.c
* Started adding code to deal with user@IP I lines to s_conf.c

-Dianora
	
============================================================================
|        Mon Jan 18 00:13:39 PST 1999	Jake Khuon <khuon@GCtr.Net>        |
============================================================================

* b37mod1

[1] Added the following options:

	IDLE_IGNORE
		When used in conjunction with IDLE_CHECK will prevent the
	        server from idle'ing clients connected from the listed IP#s. 
	        This should probably be moved into a conf file entry at
	        some point in the future.
	
	SEND_FAKE_KILL_TO_CLIENT
		Make the client think it's being KILL'ed.  This was
		originally intended to prevent clients from reconnecting to
		the server after being dropped for idleness.  It can
		probably be used for other events too.  This really only
		works well if the client was compiled with
		QUIT_ON_OPERATOR_KILL which was mandatory policy on
		UMich.Edu hosts.

	LTRACE (Limited TRACE)
		Reports only link and oper traces even when O:line is
		active. Displays only Oper, Serv, Link, and Class reports
		even if the O-line is active.  Useful for just showing
		pertinent info of a specific server. Note however that if
		the target server is not running this option then you will
		still receive a normal trace output.  Defining this will
		remove "STATS p" funtionality since the two are basically
		redundant.

	LWALLOPS
		This is actually a compatibility command which really calls
		m_locops().

	STATS_NOTICE
		Notify opers on STATS request.  Some people find this
		invasive and with the STAT command on PACE throttle the
		server shouldn't suffer but lusers stat for different
		reasons and many times it's been a prelude to some other
		form of attack.  Wrestle with your own morals before
		defining.

	SHOW_FAILED_OPER_ID
		If FAILED_OPER_NOTICE is defined, also notify when a client
		fails to oper because of a identity mismatch (wrong host or
		nick)

	SHOW_FAILED_OPER_PASSWD
		If FAILED_OPER_NOTICE is defined, also show the attempted
		passwd.  Once again, this may be morally offensive.

	WINTRHAWK
		Enable WintrHawk's style of reporting things.  This is most
		evident in TRACE and LTRACE which won't report idletimes
		otherwise.


[2] Bugfixes/changes:

	Fixed *_WHEN_SPLIT bug whereby a server was still considered split
	even though the network had reached SPLIT_SMALLNET_SIZE (but hadn't
	yet surpassed it).

	Added capability for defining OPER_UMODES, LOCOP_UMODES, and
	DEFAULT_SERVER_SPLIT_RECOVERY_TIME from config.h.

	Fixed m_trace() so that it now reports correct idletimes and added
	WINTRHAWK styling option.

	Updated opers.txt with mod1 commands.

	Added a ChangeLog |8^)

	Added some code for K-line files but it's not yet functional
============================================================================


version hybrid-6-b37	13-Jan-1999

* removed M: line port & address activation on startup
  you *must* use at least one P: line in your config file now -- FlashMan
* completely rewrote get_client_name() to clean up the conditionals mess
  makes things look prettier overall -- FlashMan
* RPL_YOURHOST is now given to the client as server_name[sockhost/port]
  that the client connected to -- for virtual addresses and such -- FlashMan
* Removed SHOW_UH define from config.h -- no longer needed -- FlashMan
